version: '3.8'

services:
  enocean-mqtt:
    container_name: enocean-mqtt
    build:
      context: .
      dockerfile: Dockerfile.standalone
    restart: unless-stopped
    
    # Zugriff auf Web-UI (Port 8099)
    ports:
      - "8099:8099"
    
    # Zugriff auf USB-Stick (Serial)
    # Entfernen, falls nur TCP genutzt wird
    devices:
      - /dev/ttyUSB0:/dev/ttyUSB0
    
    environment:
      # --- Verbindung (Wähle EINE Option) ---
      
      # Option A: Lokaler USB Stick
      SERIAL_PORT: /dev/ttyUSB0
      
      # Option B: TCP Bridge (z.B. esp3-link)
      # SERIAL_PORT: tcp://192.168.178.50:2000

      # --- MQTT Einstellungen ---
      MQTT_HOST: 192.168.1.100
      MQTT_PORT: 1883
      MQTT_USER: mqtt_user
      MQTT_PASSWORD: mqtt_password
      
      # --- System ---
      LOG_LEVEL: info
      RESTORE_STATE: "true"
      # Zeitzone ist wichtig für Logs
      TZ: Europe/Berlin
